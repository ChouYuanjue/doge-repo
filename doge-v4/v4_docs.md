# 豆子 Doge v4 功能及指令简介

## apis模块
提供多类型API的统一管理与调度中心，基于APIManager组件实现API配置加载、分类管理（text/image/video/audio）和生命周期控制。通过插件化架构整合外部接口，支持模糊匹配与精准匹配两种调用模式。

**指令说明**：
- `/api list` ：查看所有已收录的API列表，按类型分类展示
- `/api detail <api_name>` ：查看指定API的详细信息，包括匹配词、地址、类型、所需参数和解析路径
- `/api del <api_name>` ：删除指定的API配置
- **直接输入API名称**：调用对应API并返回结果（支持`/`前缀触发和@bot触发）

## complex模块
复变函数绘图插件，通过Selenium调用在线绘图工具生成复函数图像。支持标准绘图和自定义代码执行两种模式，可将复函数可视化展示为二维图像。

**指令说明**：
- `/complex plot <函数表达式>` ：根据提供的复函数表达式生成图像，支持Gamma函数等特殊函数、椭圆函数、模函数以及求和、求积表达式等等。
- `/complex custom <自定义代码>` ：执行自定义代码，通过GLSL着色器API实现生成图像，可通过此方式绘制分形（开发中）。

## cube模块
魔方游戏模块提供交互式魔方模拟功能，支持通过指令操作虚拟魔方，包括打乱、重置、公式存储等功能。用户可以通过简单的字母指令控制魔方各面旋转，并实时查看魔方状态。

**指令说明**：
- `/cba <公式名> <公式>` 或 `/添加公式 <公式名> <公式>`：添加自定义魔方公式，用于快速调用复杂操作序列。
- `/cbd <公式名>` 或 `/删除公式 <公式名>`：删除已存储的魔方公式。
- `/cbl` 或 `/公式列表`：列出所有已存储的魔方公式。
- `/cbh` 或 `/魔方帮助`：查看魔方游戏完整帮助信息，包括操作符说明和指令列表。
- `/cb <操作步骤/公式名>` 或 `/魔方 <操作步骤/公式名>`：核心指令，通过字母操作符（F/B/L/R/U/D，大小写分别表示顺/逆时针旋转）或预设公式名控制魔方各面旋转，支持组合操作（如F2R'）和公式调用（如输入预设公式名直接执行复杂序列）。
- `/cbb` 或 `/撤销操作`：撤销上一步魔方操作，支持多级撤销。
- `/cbk` 或 `/打乱魔方`：随机打乱当前群聊的魔方状态，开始新游戏。
- `/cbr` 或 `/重置魔方`：重置魔方为初始状态，清除所有操作记录。

## doubao模块
豆包AI多模态生成插件，支持文本生成图像(t2i)、文本生成视频(t2v)、图像生成视频(i2v)和图像风格转换(i2i)等功能，返回生成结果的URL或直接发送媒体文件。

**指令说明**：
- `/doubao t2i <文本>` ：根据文本描述生成图像。
- `/doubao t2v <文本>` ：根据文本描述生成视频。
- `/doubao i2v [文本] <首帧> [尾帧]` ：根据首帧生成视频。也可以指定尾帧，可增加对视频生成要求的文字描述。首帧模式同时支持从引用消息中获取图片。
- `/doubao i2i [文本] <图像>` ：根据文本描述和图像进行P图。也可以从引用消息中获取图片。

## emojimix模块
基于Emoji Kitchen API的表情混合生成工具，支持将两个表情符号混合创建新的复合表情。通过十六进制代码转换和多URL模板检查实现表情合成，支持自动触发模式，可通过消息中的表情符号自动检测混合请求并返回生成结果。注意，只支持混合emoji，不支持QQ表情。

**指令说明**：
- `/emojimix <表情1> <表情2>` ：将两个表情符号混合生成新的复合表情。
- **在消息中包含两个或更多表情符号**：自动检测并尝试混合生成新表情。

## fourier模块
傅里叶变换可视化工具，支持SVG和文本输入生成动态旋转向量动画。提供merge和separate两种处理模式，可配置采样点数、向量数量和动画帧数。支持自定义画布大小和过渡效果，生成GIF格式的傅里叶变换过程可视化动图。

**指令说明**：
- `/fourier mode <merge|separate>` ：设置傅里叶变换处理模式（分用户保存）。无参数时显示当前模式。
- `/fourier svg <svg代码>` ：处理SVG代码输入生成傅里叶变换动画。
- `/fourier text <文本>` ：处理文本输入生成傅里叶变换动画。

## genshin模块
原神游戏攻略查询工具，查询角色和武器数据，包括角色简介、基本信息、获取途径、推荐配队、武器和圣遗物搭配等信息。

**指令说明**：
- `/genshin <角色名>` ：查询角色和武器数据，包括角色简介、基本信息、获取途径、推荐配队、武器和圣遗物搭配等信息。

## gol模块
康威生命游戏插件，实现康威生命游戏的模拟与可视化，支持自定义初始状态、规则和网格大小，可生成游戏演化过程的GIF动画。

**指令说明**：
- `/gol start <RLE|坐标列表>`： 开始生命游戏模拟，支持RLE格式或坐标列表定义初始状态。
- `/gol rule <B*/S*>`： 设置生命游戏规则（如B3/S23），默认规则为B3/S23。
- `/gol frame <帧数>`： 生成指定帧数的生命游戏演化GIF动画，通过此指令开始生命游戏演化并发送动图。
- `/gol load <预设名>`： 加载预设初始模式（glider/pulsar/lwss）。
- `/gol size <WxH>`： 设置网格尺寸（10-50范围内），默认尺寸为20x20。
- `/gol stop`： 停止当前生命游戏生成任务。

## gomoku模块
五子棋游戏插件，支持PVP对战模式，包含棋盘状态管理、玩家轮流落子、胜负判定和悔棋功能，通过图像绘制生成棋盘图片，维护游戏历史记录和玩家信息，支持群聊和私聊场景。

**指令说明**：
- `/gomoku pvp` - 开始群聊PVP模式游戏
- `/gomoku join` - 加入当前PVP游戏
- `/gomoku end` - 结束当前PVP游戏
- `/gomoku surrender` - 投降并结束当前游戏
- `/gomoku undo` - 请求悔棋
- `/gomoku accept` - 同意对方悔棋请求
- `/gomoku reject` - 拒绝对方悔棋请求
- `/gomoku (x,y)` - 在指定坐标落子（如(7,7)）

## honkai模块
崩坏星穹铁道的游戏攻略查询工具，查询角色数据，支持光锥推荐、遗器搭配、主词条优先级和配队推荐等功能。

**指令说明**：
- `/honkai <角色名>` ：查询角色数据，支持光锥推荐、遗器搭配、主词条优先级和配队推荐等功能。

## latex模块
通过matplotlib的mathtext渲染LaTeX数学公式。支持自动检测文本中的数学表达式，并可配置渲染参数如DPI、字体大小、背景色等。

**指令说明**：
- `/latex <公式>` ：渲染LaTeX数学公式。
- `/tex <公式>` ：渲染LaTeX数学公式。(同上)

## liblibai模块
文生图插件，集成LiblibAI API实现多种模型的图片生成功能，支持SD、Flux等模型及ControlNet控制。

**指令说明**：
- `/lcha <模型UUID>` 或者 `/模型参数查询 <模型UUID>`：查询指定模型的详细参数信息，返回模型ID、名称、版本和基础算法等信息
- `/lcon <提示词> [图片]` 或者 `/confyui <提示词> [图片]`：使用ConfyUI模式生成图片，支持自定义工作流配置，需传入提示词和参考图片
- `/lflux <提示词>` 或者 `/flux <提示词>`：调用Flux模型生成图片，支持基础参数调整，返回4张生成结果及消耗信息
- `/limg <提示词>` 或者 `/文生图 <提示词>`：通用文生图指令，根据配置文件默认参数生成图片，支持多模型切换
- `/lsd <提示词> [图片]` 或者 `/sd <提示词> [图片]`：使用Stable Diffusion模型生成图片，支持LoRA模型加载和ControlNet控制
- `/ltran <提示词>` 或者 `/翻译提示词 <提示词>`：翻译生图提示词，支持多语言互译以优化模型输入

## lyrics模块
歌词接龙插件，支持歌词库管理和智能歌词续接功能，可自动识别歌词上下文并返回下一句。

**指令说明**：
- `/lyrics delete <歌曲名>` 或者 `/歌词删除 <歌曲名>`：从歌词库中删除指定歌曲的歌词文件
- `/lyrics help` 或者 `/歌词帮助`：显示歌词插件的详细使用帮助，包含所有指令说明和示例
- `/lyrics list` 或者 `/歌词列表`：列出当前歌词库中所有已添加的歌曲名称及数量统计
- `/lyrics reload` 或者 `/歌词重载`：重新加载歌词库文件，更新歌词索引以包含新增内容
- `/lyrics search <歌名> [歌手] [音乐源]` 或者 `/歌词搜索 <歌名> [歌手] [音乐源]`：从指定音乐源搜索并添加歌词，支持网易云、QQ音乐和酷狗
- `/lyrics view <歌曲名>` 或者 `/歌词查看 <歌曲名>`：显示指定歌曲的完整歌词内容，长歌词会自动截断预览

## mc模块
Minecraft服务器状态查询插件，支持多服务器管理和状态监控，提供延迟、在线人数等信息。

**指令说明**：
- `/mc <服务器ID/名称>` 或者 `/我的世界 <服务器ID/名称>`：查询指定Minecraft服务器的实时状态，返回在线人数、版本和延迟等信息
- `/mcadd <名称> <地址>` 或者 `/添加服务器 <名称> <地址>`：添加新的Minecraft服务器到监控列表，支持自定义名称
- `/mccleanup` 或者 `/清理服务器`：自动清理10天内未查询成功的服务器记录，优化本地存储
- `/mcget <服务器ID/名称>` 或者 `/获取服务器 <服务器ID/名称>`：获取指定服务器的详细配置信息，包括名称、地址和ID
- `/mchelp` 或者 `/服务器帮助`：显示服务器管理插件的使用帮助，包含所有指令的参数说明
- `/mclist` 或者 `/服务器列表`：列出当前所有已保存的服务器信息，包含ID、名称和地址
- `/mcdel <服务器ID/名称>` 或者 `/删除服务器 <服务器ID/名称>`：从监控列表中删除指定服务器，支持按名称或ID匹配
- `/mcup <服务器ID/名称> [新名称] [新地址]` 或者 `/更新服务器 <服务器ID/名称> [新名称] [新地址]`：更新服务器的名称或地址信息，支持部分更新

## meme模块
表情包生成插件，支持多种模板的表情包制作，可通过文本和图片参数生成自定义表情。

**指令说明**：
- `/meme blist <关键词>` 或者 `/表情黑名单 <关键词>`：管理表情包黑名单，添加或移除禁止使用的模板关键词
- `/meme detail <关键词>` 或者 `/表情详情 <关键词>`：显示指定表情包模板的详细信息，包括参数要求和示例
- `/meme list` 或者 `/表情列表`：列出所有可用的表情包模板关键词及分类统计
- `/meme off <关键词>` 或者 `/表情禁用 <关键词>`：禁用指定的表情包模板，使其无法被调用
- `/meme on <关键词>` 或者 `/表情启用 <关键词>`：启用之前被禁用的表情包模板

## mermaid模块
Mermaid图表生成插件，支持文本描述转流程图、时序图等多种图表类型，自动渲染PNG图片。

**指令说明**：
- `/mermaid <图表描述>` ：根据自然语言描述自动生成Mermaid语法代码，再根据Mermaid语法代码生成对应图表，支持流程图、时序图、类图等多种类型，返回PNG图片结果。

## mirage模块
幻影坦克生成插件，支持生成黑白模式和彩色模式的幻影坦克图片，可通过指令参数指定图片来源。

**指令说明**：
- `/mirage <图片1> <图片2>`：生成幻影坦克图片，默认黑白模式。需在命令后附带两张图片，或者在直接发送指令后根据bot指示发送图片。
- `/mirage gray <图片1> <图片2>`：生成黑白模式幻影坦克图片。需在命令后附带两张图片，或者在直接发送指令后根据bot指示发送图片。
- `/mirage color <图片1> <图片2>`：生成彩色模式幻影坦克图片。需在命令后附带两张图片，或者在直接发送指令后根据bot指示发送图片。

## music模块
音乐搜索与播放功能，支持点歌、热评显示和歌词展示。默认使用网易云音乐API，支持多种选择模式和发送方式。

**指令说明**：
- `/music <歌曲名>` 或 `/点歌 <歌曲名>`：搜索并播放指定歌曲，支持直接输入序号选择结果（如`/music 晴天 1`），或者待bot发送搜索到的歌曲列表后输入序号选择。

## pack模块
Circle Packing计算插件，提供计算与可视化功能，支持正方形中堆圆形(CSQ)和大圆中堆小圆(CCI)两种排列模式。

**指令说明**：
- `/pack csq <size> <diameter>`：计算正方形内放置圆形的最优方案，参数为正方形边长和小圆直径。
- `/pack cci <size> <diameter>`：计算大圆内放置小圆的最优方案，参数为大圆直径和小圆直径。

## pokemon模块
宝可梦融合图片生成工具，支持从预设数据源获取融合宝可梦图片，包含宝可梦数据加载、ID映射、相似名称匹配和图片URL有效性检查功能，支持自定义和自动生成两种图片来源配置。

**指令说明**：
- `/pokemon <宝可梦1>+<宝可梦2>` 或 `/融合 <宝可梦1>+<宝可梦2>`：融合指定的两只宝可梦。
- `/pokemon <宝可梦>` 或 `/融合 <宝可梦>`：将指定宝可梦与随机宝可梦融合。
- `/pokemon` 或 `/融合`：随机融合两只宝可梦。
- `/pokemon sc`：切换数据源，可选`gitlab`或`fushioncalc`。

## pjsk模块
Project Sekai（世界计划）猜歌插件，包含完整的游戏逻辑和资源管理系统。集成数据库服务、音频处理、统计分析和缓存机制，支持根据音乐片段猜歌曲名的互动游戏功能。

**指令说明**：
### 核心游戏指令
- `/pjsk gs<模式>` 或 `/pjsk 猜歌<模式>`：开始猜歌游戏，支持数字模式（1-7）或普通模式（默认）。例如`/pjsk gs3`选择模式3。
- `/pjsk rgs` 或 `/pjsk 随机猜歌`：开始随机特殊模式的猜歌游戏，自动应用随机音效组合。
- `/pjsk vgs` 或 `/pjsk 猜歌手`：开始猜歌手游戏，播放1.5倍速音频片段，从多个选项中选择正确的歌手组合。

### 排行榜与统计指令
- `/pjsk rank group` 或 `/pjsk 群排行榜`：显示当前群聊的猜歌排行榜（前10名）。
- `/pjsk rank local` 或 `/pjsk 本地排行榜`：显示本地存储的全局猜歌排行榜。
- `/pjsk rank global` 或 `/pjsk 全局排行榜`：显示服务器猜歌排行榜（需配置API）。
- `/pjsk score` 或 `/pjsk 猜歌分数`：显示用户在本群、服务器和本地的总分数统计，包含剩余游戏次数。
- `/pjsk stats` 或 `/pjsk 题型统计`：以图片形式显示个人各题型正确率统计及排名数据。

### 管理与调试指令
- `/pjsk reset gs <用户ID>` 或 `/pjsk 重置猜歌次数 <用户ID>`：重置指定用户的猜歌次数（仅限管理员）。
- `/pjsk reset ls <用户ID>` 或 `/pjsk 重置听歌次数 <用户ID>`：重置指定用户的听歌次数（仅限管理员）。
- `/pjsk reset stats` 或 `/pjsk 重置题型统计`：清空所有题型统计数据（仅限超级管理员）。
- `/pjsk test [模式] <歌曲名/ID>` 或 `/pjsk 测试猜歌 [模式] <歌曲名/ID>`：生成测试用猜歌游戏（仅限超级管理员）。
- `/pjsk syncscore` 或 `/pjsk 同步分数`：将本地分数数据同步至服务器排行榜（仅限超级管理员）。

### 音乐播放指令
- `/pjsk listen piano` 或 `/pjsk 听钢琴`：随机或指定播放钢琴曲。
- `/pjsk listen karaoke` 或 `/pjsk 听伴奏`：随机或指定播放纯伴奏曲。
- `/pjsk listen vocals` 或 `/pjsk 听人声`：随机或指定播放纯人声曲。
- `/pjsk listen bass` 或 `/pjsk 听贝斯`：随机或指定播放贝斯音轨。
- `/pjsk listen drums` 或 `/pjsk 听鼓组`：随机或指定播放鼓组音轨。
- `/pjsk listen anvo` 或 `/pjsk 听换人声`：播放Another Vocal版本歌曲，支持按角色或歌曲名查询。

## typst模块
集成Typst现代排版系统，提供高质量的文档排版功能。支持配置文件定制排版样式和输出格式。

**指令说明**：
- `/tym <公式内容>`：渲染数学公式，自动应用预设样式（居中对齐、优化字体大小）。例如`/tym $E=mc^2$`。
- `/typ <代码块内容>`：渲染原始Typst代码，支持完整的Typst语法和包导入。
- `/yau <聊天记录内容>`：使用OurChat模板渲染聊天记录样式，支持自定义用户名称和消息气泡样式。

## rrpl模块
基于Recursive Radical Packing Language(RRPL)的汉字结构渲染工具，通过Node.js脚本解析RRPL语法（基于米字格笔画编码和递归组合规则），将汉字描述字符串渲染为SVG路径，支持转换为高分辨率PNG图像（300dpi，2倍缩放）。核心功能包括5000+传统汉字的结构化描述、自定义字符组合，适用于字体设计与汉字结构分析场景。

**指令说明**：
- `/rrpl <RRPL代码>` ：渲染RRPL代码为SVG并转换为PNG发送。

## run模块
在线代码执行插件，支持通过菜鸟教程API运行多种编程语言代码。支持Python、JavaScript、C++、Java等12种编程语言，可直接执行用户输入的代码并返回运行结果。

**指令说明**：
- `/run <语言> <代码>` ：执行指定语言的代码并返回运行结果。支持的语言：Python、JavaScript、C++、Java、PHP、Ruby、Python3、Perl、Swift、Kotlin、Go、Rust。

## soup模块
海龟汤推理游戏插件，实现AI驱动的谜题生成、动态问答判断与多难度游戏管理。基于LLM的谜题自动生成系统支持主题定制与复杂度控制，包含线程安全的题库管理、游戏状态追踪与会话控制功能，实现提问次数限制、答案验证等级与动态提示生成机制，支持游戏存档与历史记录查询，适配多种LLM提供商接口。

**指令说明**：
- `/soup start` 或 `/汤`：开始新的海龟汤游戏。
- `/soup reveal` 或 `/揭晓`：揭晓当前游戏答案并结束游戏。
- `/soup hint` 或 `/提示`：获取当前谜题的方向性提示。
- `/soup level <难度>` 或 `/汤难度 <难度>`：设置游戏难度（支持普通/困难/简单）。
- `/soup status` 或 `/汤状态`：查看当前游戏状态与提问次数。
- `/soup end` 或 `/强制结束`：强制结束当前游戏。
- `/soup view` 或 `/查看`：查看当前游戏的历史问答记录。
- `/soup vf <猜测内容>` 或 `/验证 <猜测内容>`：验证用户对谜题的猜测。

## st模块
基于Safebooru图片API的资源获取工具，支持标签搜索与随机图片获取功能。实现中英文标签自动映射系统，通过XLSX配置文件管理标签对应关系，支持模糊匹配与精确查询模式，包含临时文件自动清理机制与请求频率控制，提供可选的标签显示功能与使用次数统计，适配多种图片格式与分辨率。

**指令说明**：
- `/st tag <标签>`：根据标签搜索图片，支持中文标签自动映射。
- `/st random`：获取随机图片，可配置显示图片关联标签。

## tangut模块
西夏文处理与拟音工具，实现基于双向索引的西夏文-中文互译系统。包含龚勋拟音、龚煌城拟音两种学术拟音方案，实现中文分词与西夏文字符匹配算法，提供西夏文文本转图片功能。

**指令说明**：
- `/tangut render <文本>`：将西夏文文本渲染为图片。
- `/tangut gx <西夏文>`：获取西夏文的龚勋拟音。
- `/tangut ghc <西夏文>`：获取西夏文的龚煌城拟音。
- `/tangut t2zh <西夏文>`：将西夏文翻译为中文。
- `/tangut zh2t <中文>`：将中文翻译为西夏文并渲染为图片（实验性功能，不保证准确）。

## trace模块
动漫/Gal图片识别插件，集成AnimeTrace API实现高精度图像识别。支持两种识别模式（动漫/游戏），可识别图片中的角色、场景并返回可能的作品信息，支持直接发送图片或引用包含图片的消息进行识别。

**指令说明**：
- `/trace anime <图片>` ：识别图片中的角色、场景并返回可能的动漫作品信息。
- `/trace gal <图片>` ：识别图片中的角色、场景并返回可能的Gal游戏作品信息。

## utex模块
LaTeX公式渲染工具，基于upmath.me API和cairosvg实现高质量数学公式转换，通过原生TeX渲染，支持tikz、tikz-cd等宏包。

**指令说明**：
- `/utex <公式>` ：渲染LaTeX数学公式。

## vv模块
张维为表情包搜索发送插件，实现关键词匹配的表情包查询，返回与查询词最相关的图片结果。

**指令说明**：
- `/vv <关键词>` ：查询与关键词最相关的表情包并发送。

## wa模块
WolframAlpha查询工具，集成WolframAlpha Full Result API实现科学计算与知识查询功能，支持文本和图像结果返回。

**指令说明**：
- `/wa <WolframAlpha表达>` ：查询WolframAlpha并返回结果。

## wiki模块
使用DeepWiki查询指定GitHub仓库，可作为问答助手。默认配置为查询豆子Doge仓库，也可指定其他GitHub仓库进行查询。

**指令说明**：
- `/wiki <问题>`或`/dw <问题>` ：查询豆子Doge仓库的DeepWiki并返回结果。
- `/wiki <仓库> <问题>`或`/dw <仓库> <问题>` ：指定查询的GitHub仓库，格式为`用户名/仓库名`。

## wp模块
弱能力获取与对战插件，实现随机能力分配和玩家对战功能，基于JSON数据库存储能力数据和用户信息，支持@提及或者直接通过QQ号指定对战目标，包含能力描述生成和对战逻辑判断机制。

**指令说明**：
- `/wp get`：随机获取一项超能力，系统会从预设能力库中为用户分配随机能力并保存到个人数据中。
- `/wp fight <目标>`：与指定目标进行能力对战，支持@提及用户或直接输入QQ号。系统会生成双方能力对决的详细描述。
